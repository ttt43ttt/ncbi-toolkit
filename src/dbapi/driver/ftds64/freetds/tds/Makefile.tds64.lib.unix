# $Id: Makefile.tds64.lib.unix 549407 2017-10-24 18:12:21Z ucko $

# Adjust ICC flags to avoid problematic references to __intel_sse*
# functions (as of ICC [20]17).

ifeq "$(COMPILER)" "icc"
  config.o:     CFLAGS += -fno-builtin-strcat -fno-builtin-strcpy
  convert.o:    CFLAGS += -fno-builtin-strcpy -fno-builtin-strncmp \
                          -fno-builtin-strtoll
  getmac.o :    CFLAGS += -fno-builtin-strcpy
  iconv.o:      CFLAGS += -fno-builtin-strncmp
  login.o:      CFLAGS += -fno-builtin-strcat -fno-builtin-strchr
  mem.o:        CFLAGS += -fno-builtin-strcpy
  query.o:      CFLAGS += -fno-builtin-strcat
  threadsafe.o: CFLAGS += -fno-builtin-strcat
  token.o:      CFLAGS += -fno-builtin-strcpy
endif

# Limit usage of KRB5_INCLUDE to avoid iconv header/library skew that
# can otherwise occur on FreeBSD, and perhaps elsewhere.
gssapi.o: CPPFLAGS += $(KRB5_INCLUDE)
