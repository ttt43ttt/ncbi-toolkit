{
    "svn_id":   "$Id$",
    "common":   {
        "service":          "bouncehttp",
        "expect":           {
            "host_nix":         "130.14.191.21",
            "host_win":         "130.14.191.13",
            "port":             4140,
            "host_hdr":         "Host: bouncehttp.linkerd.ncbi.nlm.nih.gov"
        },
        "env_set":      [
            {"CONN_LBSMD_DISABLE":          "1"},
            {"CONN_DISPD_DISABLE":          "1"},
            {"CONN_LINKERD_ENABLE":         "1"},
            {"CONN_NAMERD_FOR_LINKERD":     "0"},
            {"CONN_NAMERD_ENABLE":          "0"}
        ]
    },
    "tests":   [
        {
            "title":            "bouncehttp",
            "scheme":           "http"
        },
        {
            "title":            "bouncehttp with iter repop and reset",
            "scheme":           "http",
            "iter-repop":       "yes",
            "iter-reset":       "yes"
        },
        {
            "title":            "bouncehttp with endpoint in API",
            "scheme":           "http",
            "user":             "user",
            "pass":             "pass",
            "path":             "/p1/p2",
            "args":             "a=b&c=d"
        },
        {
            "title":            "bouncehttp with HTTPS",
            "disabled":         1,
            "scheme":           "https"
        },
        {
            "title":            "bouncehttp with missing scheme"
        },
        {
            "title":            "bouncehttp with endpoint in config",
            "env_set":      [
                {"CONN_LINKERD_SCHEME":             "http"},
                {"CONN_LINKERD_USER":               "user"},
                {"CONN_LINKERD_PASSWORD":           "pass"},
                {"CONN_LINKERD_PATH":               "/p1/p2"},
                {"CONN_LINKERD_ARGS":               "a=b&c=d"}
            ]
        },
        {
            "title":            "bouncehttp with scheme in config but not API",
            "expect_warn":      "yes",
            "path":             "/p1/p2",
            "args":             "a=b&c=d",
            "env_set":      [
                {"CONN_LINKERD_SCHEME":             "http"}
            ]
        },
        {
            "title":            "testbouncehttp with endpoint in namerd",
            "service":          "testbouncehttp",
            "env_set":      [
                {"CONN_DTAB":                       "/service/testbouncehttp=>/service/bouncehttp"},
                {"CONN_NAMERD_FOR_LINKERD":         "1"}
            ]
        },
        {
            "title":            "testbouncehttp with scheme in namerd but not API or config",
            "service":          "testbouncehttp",
            "expect_warn":      "yes",
            "path":             "/p1/p2",
            "env_set":      [
                {"CONN_LINKERD_PATH":               "/p1/p2"},
                {"CONN_DTAB":                       "/service/testbouncehttp=>/service/bouncehttp"},
                {"CONN_NAMERD_FOR_LINKERD":         "1"}
            ]
        }
    ]
}
